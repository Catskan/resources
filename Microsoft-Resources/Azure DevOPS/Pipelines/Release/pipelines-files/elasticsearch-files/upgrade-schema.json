{
    "name": "#{CUSTOMERNAME}#.#{cluster1CL1DnsZoneName}#",
    "prune_orphans": false,
    "settings": {
      "observability": {
        "metrics": {
          "destination": {
            "deployment_id": "#{elasticObservabilityID}#",
            "ref_id": "main-elasticsearch"
          }
        },
        "logging": {
          "destination": {
            "deployment_id": "#{elasticObservabilityID}#",
            "ref_id": "main-elasticsearch"
          }
        }
      }
    },
    "resources": {
      "elasticsearch": [
        {
          "region": "#{es_azure_region}#",
          "settings": {
            "dedicated_masters_threshold": 6
          },
          "plan": {
            "autoscaling_enabled": false,
            "cluster_topology": [
              {
                "zone_count": "#{es_coordinating_zone_count}#",
                "instance_configuration_id": "#{es_coordinating_instance_id}#",
                "node_roles": [
                  "ingest",
                  "remote_cluster_client"
                ],
                "id": "coordinating",
                "size": {
                  "resource": "memory",
                  "value": "#{es_coordinating_memory_size}#"
                },
                "elasticsearch": {
                  "enabled_built_in_plugins": []
                }
              },
              {
                "zone_count": "#{es_hot_content_zone_count}#",
                "elasticsearch": {
                  "node_attributes": {
                    "data": "hot"
                  },
                  "enabled_built_in_plugins": []
                },
                "instance_configuration_id": "#{es_hot_content_instance_id}#",
                "node_roles": [
                  "master",
                  "ingest",
                  "transform",
                  "data_hot",
                  "remote_cluster_client",
                  "data_content"
                ],
                "id": "hot_content",
                "size": {
                  "resource": "memory",
                  "value": "#{es_hot_content_memory_size}#"
                }
              },
              {
                "zone_count": "#{es_warm_zone_count}#",
                "elasticsearch": {
                  "node_attributes": {
                    "data": "warm"
                  },
                  "enabled_built_in_plugins": []
                },
                "instance_configuration_id": "#{es_warm_instance_id}#",
                "node_roles": [
                  "data_warm",
                  "remote_cluster_client"
                ],
                "id": "warm",
                "size": {
                  "resource": "memory",
                  "value": "#{es_warm_memory_size}#"
                }
              },
              {
                "zone_count": "#{es_cold_zone_count}#",
                "elasticsearch": {
                  "node_attributes": {
                    "data": "cold"
                  },
                  "enabled_built_in_plugins": []
                },
                "instance_configuration_id": "#{es_cold_instance_id}#",
                "node_roles": [
                  "data_cold",
                  "remote_cluster_client"
                ],
                "id": "cold",
                "size": {
                  "resource": "memory",
                  "value": "#{es_cold_memory_size}#"
                }
              },
              {
                "zone_count": "#{es_frozen_zone_count}#",
                "elasticsearch": {
                  "node_attributes": {
                    "data": "frozen"
                  },
                  "enabled_built_in_plugins": []
                },
                "instance_configuration_id": "#{es_frozen_instance_id}#",
                "node_roles": [
                  "data_frozen"
                ],
                "id": "frozen",
                "size": {
                  "resource": "memory",
                  "value": "#{es_frozen_memory_size}#"
                }
              },
              {
                "zone_count": "#{es_master_zone_count}#",
                "instance_configuration_id": "#{es_master_instance_id}#",
                "node_roles": [
                  "master",
                  "remote_cluster_client"
                ],
                "id": "master",
                "size": {
                  "resource": "memory",
                  "value": "#{es_master_memory_size}#"
                },
                "elasticsearch": {
                  "enabled_built_in_plugins": []
                }
              },
              {
                "zone_count": "#{es_ml_zone_count}#",
                "instance_configuration_id": "#{es_ml_instance_id}#",
                "node_roles": [
                  "ml",
                  "remote_cluster_client"
                ],
                "id": "ml",
                "size": {
                  "resource": "memory",
                  "value": "#{es_ml_memory_size}#"
                },
                "elasticsearch": {
                  "enabled_built_in_plugins": []
                }
              }
            ],
            "elasticsearch": {
              "version": "#{ES_VERSION}#"
            },
            "deployment_template": {
              "id": "#{es_template_id}#"
            }
          },
          "ref_id": "main-elasticsearch"
        }
      ],
      "kibana": [
        {
          "elasticsearch_cluster_ref_id": "main-elasticsearch",
          "region": "#{es_azure_region}#",
          "plan": {
            "cluster_topology": [
              {
                "instance_configuration_id": "azure.kibana.e32sv3",
                "zone_count": 1,
                "size": {
                  "resource": "memory",
                  "value": 1024
                }
              }
            ],
            "kibana": {
              "version": "#{ES_VERSION}#"
            }
          },
          "ref_id": "main-kibana"
        }
      ],
      "apm": [
        {
          "elasticsearch_cluster_ref_id": "main-elasticsearch",
          "region": "#{es_azure_region}#",
          "plan": {
            "cluster_topology": [
              {
                "instance_configuration_id": "azure.apm.e32sv3",
                "zone_count": 1,
                "size": {
                  "resource": "memory",
                  "value": 1024
                }
              }
            ],
            "apm": {
              "version": "#{ES_VERSION}#"
            }
          },
          "ref_id": "main-apm"
        }
      ],
      "enterprise_search": [
        {
          "region": "#{es_azure_region}#",
          "ref_id": "main-enterprise_search",
          "elasticsearch_cluster_ref_id": "main-elasticsearch",
          "plan": {
            "cluster_topology": [
              {
                "node_type": {
                  "connector": true,
                  "appserver": true,
                  "worker": true
                },
                "instance_configuration_id": "azure.enterprisesearch.d64sv3",
                "zone_count": 2,
                "enterprise_search": {
                  "system_settings": {}
                },
                "size": {
                  "resource": "memory",
                  "value": 4096
                }
              }
            ],
            "enterprise_search": {
              "system_settings": {},
              "version": "#{ES_VERSION}#"
            },
            "transient": {
              "strategy": {
                "autodetect": {}
              }
            }
          }
        }
      ]
    }
}
    
    
  